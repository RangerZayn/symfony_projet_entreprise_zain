{% extends 'base.html.twig' %}

{% block title %}R√©sum√© du Produit{% endblock %}

{% block page_title %}V√©rifier et Confirmer{% endblock %}

{% block page_content %}
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-6 text-center">R√©capitulatif du produit</h1>

        <div class="max-w-xl mx-auto">
            <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
                <!-- D√©tails du Produit -->
                <div class="border-b border-gray-200 px-6 py-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-4">üìã D√©tails du Produit</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Nom du Produit</p>
                            <p class="text-base text-gray-800 font-semibold mt-1">{{ flow.details.name }}</p>
                        </div>
                        <div>
                            <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Prix Unitaire</p>
                            <p class="text-lg text-blue-600 font-bold mt-1">{{ flow.details.price }}‚Ç¨</p>
                        </div>
                        {% if flow.details.description %}
                            <div>
                                <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Description</p>
                                <p class="text-gray-700 mt-1 text-sm">{{ flow.details.description }}</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Type de Produit -->
                <div class="border-b border-gray-200 px-6 py-6">
                    <h2 class="text-base font-semibold text-gray-800 mb-4">üì¶ Type de Produit</h2>
                    <div class="inline-block bg-gray-100 rounded-full px-4 py-2 text-sm font-semibold text-gray-800">
                        {% if flow.type.product_type == 'physical' %}
                            üè≠ Produit Physique
                        {% else %}
                            üíæ Produit Num√©rique
                        {% endif %}
                    </div>
                </div>

                <!-- D√©tails Sp√©cifiques -->
                {% if flow.type.product_type == 'physical' and flow.logistics %}
                    <div class="border-b border-gray-200 px-6 py-6">
                        <h2 class="text-base font-semibold text-gray-800 mb-4">üìè Logistique</h2>
                        <div class="space-y-3">
                            {% if flow.logistics.weight %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Poids</p>
                                    <p class="text-gray-800 mt-1">{{ flow.logistics.weight }} kg</p>
                                </div>
                            {% endif %}
                            {% if flow.logistics.dimensions %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Dimensions</p>
                                    <p class="text-gray-800 mt-1">{{ flow.logistics.dimensions }}</p>
                                </div>
                            {% endif %}
                            {% if flow.logistics.stock %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Stock</p>
                                    <p class="text-gray-800 mt-1">{{ flow.logistics.stock }} unit√©s</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                {% elseif flow.type.product_type == 'digital' and flow.license %}
                    <div class="border-b border-gray-200 px-6 py-6">
                        <h2 class="text-base font-semibold text-gray-800 mb-4">üîê Licence Num√©rique</h2>
                        <div class="space-y-3">
                            {% if flow.license.license_key %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Cl√© de Licence</p>
                                    <p class="text-gray-800 mt-1 font-mono text-xs">{{ flow.license.license_key }}</p>
                                </div>
                            {% endif %}
                            {% if flow.license.max_users %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">Utilisateurs Maximum</p>
                                    <p class="text-gray-800 mt-1">{{ flow.license.max_users }} utilisateurs</p>
                                </div>
                            {% endif %}
                            {% if flow.license.download_url %}
                                <div>
                                    <p class="text-xs font-semibold text-gray-500 uppercase tracking-wide">URL de T√©l√©chargement</p>
                                    <p class="text-blue-600 mt-1 text-xs break-all">{{ flow.license.download_url }}</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
            </div>

            <!-- Action Buttons -->
            {{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}
                <div class="flex space-x-3">
                    {% if product_id is defined and product_id %}
                        <a href="{{ path('product_edit', {'id': product_id, 'step': prevStep}) }}" class="flex-1 bg-gray-900 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded text-center transition duration-200">
                            ‚Üê Pr√©c√©dent
                        </a>
                        <button type="submit" class="flex-1 bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-4 rounded transition duration-200">
                            ‚úì Modifier
                        </button>
                    {% else %}
                        <a href="{{ path('product_new', {'step': prevStep}) }}" class="flex-1 bg-gray-900 hover:bg-gray-800 text-white font-bold py-3 px-4 rounded text-center transition duration-200">
                            ‚Üê Pr√©c√©dent
                        </a>
                        <button type="submit" class="flex-1 bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-4 rounded transition duration-200">
                            ‚úì Cr√©er
                        </button>
                    {% endif %}
                </div>
            {{ form_end(form) }}

            <a href="{{ path('product_index') }}" class="block text-center mt-4 text-gray-600 hover:text-gray-800 text-sm">
                ‚úï Annuler
            </a>
        </div>
    </div>
{% endblock %}
